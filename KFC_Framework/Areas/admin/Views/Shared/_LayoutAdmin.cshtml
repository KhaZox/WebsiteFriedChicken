<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width" />
        <title>@ViewBag.Title</title>
        <link href="https://cdn.lineicons.com/4.0/lineicons.css" rel="stylesheet" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
              integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
        <link rel="stylesheet" href="~/Content/Admin.css" />

        <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://cdn.datatables.net/v/bs4-4.6.0/jq-3.7.0/dt-1.13.10/b-2.4.2/fc-4.3.0/sc-2.3.0/sb-1.6.0/sp-2.2.0/sl-1.7.0/datatables.min.css" rel="stylesheet">


        @Scripts.Render("~/bundles/modernizr")
        @Styles.Render("~/Content/css")
        @RenderSection("css", false)
    </head>
    <body>
        <div class="wrapper">
            <aside id="sidebar">
                <div class="d-flex">
                    <button class="toggle-btn" type="button">
                        <i class="lni lni-grid-alt"></i>
                    </button>
                    <div class="sidebar-logo">
                        <a href="#">KFC</a>
                    </div>
                </div>
                <ul class="sidebar-nav">
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link collapsed has-dropdown" data-bs-toggle="collapse"
                           data-bs-target="#goods">
                            <i class="lni lni-dropbox"></i>
                            <span>Quản lý sản phẩm</span>
                        </a>
                        <ul id="goods" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a href="/admin/managerProduct/Index" class="sidebar-link">Thông tin sản phẩm</a>
                            </li>
                            <li class="sidebar-item">
                                <a href="/admin/managerProduct/Create" class="sidebar-link">Thêm sản phẩm</a>
                            </li>
                        </ul>
                    </li>

                    <li class="sidebar-item">
                        <a href="/admin/managerOrder/Index" class="sidebar-link">
                            <i class="lni lni-credit-cards"></i>
                            <span>Quản lý đơn hàng</span>
                        </a>
                    </li>

                    <li class="sidebar-item">
                        <a href="/admin/managerWarehouse" class="sidebar-link">
                            <i class="lni lni-package"></i>
                            <span>Quản lý kho</span>
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="/admin/managerDiscount" class="sidebar-link">
                            <i class="bi bi-gift"></i>
                            <span>Quản lý ưu đãi</span>
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="/admin/managerAccount" class="sidebar-link">
                            <i class="lni lni-user"></i>
                            <span>Quản lý người dùng</span>
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link collapsed has-dropdown" data-bs-toggle="collapse"
                           data-bs-target="#report">
                            <i class="lni lni-printer"></i>
                            <span>Báo cáo</span>
                        </a>
                        <ul id="report" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a href="/admin/managerReport/salesReport" class="sidebar-link">Báo cáo doanh thu</a>
                            </li>
                            <li class="sidebar-item">
                                <a href="/admin/managerReport/ordersReport" class="sidebar-link">Báo cáo thống kê đơn đặt hàng</a>
                            </li>
                        </ul>
                    </li>
                </ul>

                <div class="sidebar-footer">
                    <a class="logout sidebar-link">
                        <i class="lni lni-exit"></i>
                        <span>Logout</span>
                    </a>
                </div>
            </aside>


            <style>
                .logo-kfc {
                    width: 90px;
                    height: 30px;
                    background-size: cover;
                    overflow: hidden;
                }

                .main {
                    min-height: 90vh;
                }

                #sidebar {
                    position: fixed;
                    top: 0;
                    left: 0;
                    bottom: 0;
                }
                .main{
                    margin-left: 70px;
                }
            </style>
            
            @*Phần content*@
            <div class="main p-2">
                <div class="text-center mb-3 position-relative d-flex justify-content-between align-items-center ">
                    <div>&#160;</div>

                    <img class="logo-kfc" src="https://static.kfcvietnam.com.vn/images/web/kfc-logo-mobile.svg?v=5.0" />

                    <div class="dropdown-center" style="cursor: pointer">
                        <div class="d-flex justify-content-around align-items-center dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                            <img src="@Session["Picture"]" style="width: 35px; height: 35px; object-fit: cover; object-position: top" class="rounded-circle me-2" alt="Yes">
                            <div class="mb-0">Xin chào, <strong>@Session["LoggedInUser"]</strong></div>
                        </div>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="/admin/employeeAccount"><i class="bi bi-person-circle"></i> Thông tin cá nhân</a></li>
                            <li><a class="dropdown-item" href="/admin/employeeAccount/changePassword"><i class="bi bi-lock-fill"></i> Đổi mật khẩu</a></li>
                            <li><a class="dropdown-item logout" href="#"><i class="lni lni-exit"></i> Đăng xuất</a></li>
                        </ul>
                    </div>
                </div>
                <div class="">
                    @RenderBody()
                </div>
            </div>
        </div>

        @Scripts.Render("~/bundles/jquery")
        @Scripts.Render("~/bundles/bootstrap")
        @RenderSection("scripts", required: false)
        <script src="~/Scripts/Admin.js"></script>

        <script src="https://cdn.datatables.net/v/bs4-4.6.0/jq-3.7.0/dt-1.13.10/b-2.4.2/fc-4.3.0/sc-2.3.0/sb-1.6.0/sp-2.2.0/sl-1.7.0/datatables.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/js/bootstrap.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
                crossorigin="anonymous">
        </script>
        <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
        <script>
            $(document).ready(function() {
                $(".logout").click(function() {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("LogoutEmployee", "Account", new { area = "" })', // ASP.NET MVC Razor syntax để sinh URL
                        success: function(data) {
                            window.location.href = '@Url.Action("LoginForEmployee", "Account", new { area = "" })';
                        },
                        error: function(xhr, status, error) {
                            // Xử lý lỗi
                            console.error("Logout failed: " + error);
                        }
                    });
                });

                //Hover icon employee
                $('.dropdown-center').hover(function () {
                    $(this).find('.dropdown-menu').show();
                }, function () {
                    $(this).find('.dropdown-menu').hide();
                });
            });
        </script>

    </body>
</html>
